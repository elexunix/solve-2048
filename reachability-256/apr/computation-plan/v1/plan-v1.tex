\documentclass[12pt]{article}
\usepackage{amsmath, amssymb}
\usepackage[russian]{babel}

\begin{document}

\begin{center} \LARGE Plan of the computation for 128 (256) \end{center}
\hspace*{\fill} Alexey Slizkov\\
\hspace*{\fill} v1 (21.04.2021)\\


\section{Общая цель вычисления}
Данное вычисление в старой терминологии ``для плитки 128'', в новой ``для плитки 256'';\\
На всякий случай для ясности: это означает, что здесь предлагается
\begin{center} \textit{посчитать, можно ли получить 256 гарантированно} \end{center}
Кстати, есть также возможность сделать ещё для одной плитки меньше, там вероятность получить полезный ответ ниже, но и вычислений опять же в разы меньше. Стоит ли это делать, не знаю, как скажете, но конкретно этот текст рассчитан в любом случае на проверку гарантированной достижимости 256.\\
Заметим, что, согласно дефолтному предположению, ответ на этот вопрос будет, что получить можно, а это значит, что задача ещё не будет решена, нужно будет продолжать считать (для плиток больше).\\\\
Для того, чтобы проверить, можно ли набрать 256, предлагается рассматривать в точности те позиции, на которых все плитки не больше 128, то есть $(7 + 1)^{16}$ позиций.\\
\clearpage


\section{Размеры слоёв}
Количество позиций в каждом слое с фиксированной суммой (только чётные суммы; номер слоя и есть сумма):
\scriptsize
\begin{verbatim}
layer 0, size 1
layer 2, size 16
layer 4, size 136
layer 6, size 800
layer 8, size 3636
layer 10, size 13568
layer 12, size 43248
layer 14, size 121088
layer 16, size 304066
layer 18, size 695808
layer 20, size 1469376
layer 22, size 2892896
layer 24, size 5355776
layer 26, size 9393248
layer 28, size 15708416
layer 30, size 25190912
layer 32, size 38933183
layer 34, size 58241552
layer 36, size 84640616
layer 38, size 119861472
layer 40, size 165818164
layer 42, size 224567072
layer 44, size 298273744
layer 46, size 389177632
layer 48, size 499600754
layer 50, size 631954144
layer 52, size 788794240
layer 54, size 972802944
layer 56, size 1186826224
layer 58, size 1433777504
layer 60, size 1716694400
layer 62, size 2038580032
layer 64, size 2402589851
layer 66, size 2811829424
layer 68, size 3269648760
layer 70, size 3779094496
layer 72, size 4343287180
layer 74, size 4964535104
layer 76, size 5645133360
layer 78, size 6386152096
layer 80, size 7189224814
layer 82, size 8054955648
layer 84, size 8985549120
layer 86, size 9981672736
layer 88, size 11046305184
layer 90, size 12179921184
layer 92, size 13386226784
layer 94, size 14665048416
layer 96, size 16021774934
layer 98, size 17457033664
layer 100, size 18979065712
layer 102, size 20587486048
layer 104, size 22291510696
layer 106, size 24087320064
layer 108, size 25983512352
layer 110, size 27970943936
layer 112, size 30060960100
layer 114, size 32243389440
layer 116, size 34534857792
layer 118, size 36920879296
layer 120, size 39422982880
layer 122, size 42020584384
layer 124, size 44738283360
layer 126, size 47547260896
layer 128, size 50484118931
layer 130, size 53517105936
layer 132, size 56691915128
layer 134, size 59962555392
layer 136, size 63382705660
layer 138, size 66886462144
layer 140, size 70529852976
layer 142, size 74228252832
layer 144, size 78063604630
layer 146, size 81941184896
layer 148, size 85961186112
layer 150, size 90007052960
layer 152, size 94206093120
layer 154, size 98411629344
layer 156, size 102769439456
layer 158, size 107113807072
layer 160, size 111647796674
layer 162, size 116180606560
layer 164, size 120941938096
layer 166, size 125697155200
layer 168, size 130715128728
layer 170, size 135692096704
layer 172, size 140923806080
layer 174, size 146074689760
layer 176, size 151530738364
layer 178, size 156898141568
layer 180, size 162607752192
layer 182, size 168206657472
layer 184, size 174199379872
layer 186, size 180027255744
layer 188, size 186260838112
layer 190, size 192312089696
layer 192, size 198886317470
layer 194, size 205277788832
layer 196, size 212249876272
layer 198, size 218998938112
layer 200, size 226375030072
layer 202, size 233390128256
layer 204, size 241000522528
layer 206, size 248184604096
layer 208, size 256077992716
layer 210, size 263470454016
layer 212, size 271610246848
layer 214, size 279184166976
layer 216, size 287577756032
layer 218, size 295237826240
layer 220, size 303757074656
layer 222, size 311563022432
layer 224, size 320462704460
layer 226, size 328582633056
layer 228, size 337887649728
layer 230, size 346345732960
layer 232, size 356053953872
layer 234, size 364629584704
layer 236, size 374480962016
layer 238, size 383194944736
layer 240, size 393417108040
layer 242, size 402325141376
layer 244, size 412838449792
layer 246, size 421959768320
layer 248, size 432783360000
layer 250, size 441893231616
layer 252, size 452869364992
layer 254, size 462245077632
layer 256, size 473824242355
layer 258, size 483563525792
layer 260, size 495628262456
layer 262, size 505698857456
layer 264, size 518086182908
layer 266, size 527934531936
layer 268, size 540234191152
layer 270, size 550045442960
layer 272, size 562587821190
layer 274, size 572234819776
layer 276, size 584782918816
layer 278, size 594305286880
layer 280, size 606792754976
layer 282, size 615736797792
layer 284, size 628078822432
layer 286, size 637150192240
layer 288, size 650044500250
layer 290, size 659200939120
layer 292, size 672437457776
layer 294, size 681726783920
layer 296, size 695021090936
layer 298, size 703612708704
layer 300, size 716697924000
layer 302, size 725313321200
layer 304, size 738767624780
layer 306, size 747102338560
layer 308, size 760662268352
layer 310, size 768948619520
layer 312, size 782468574656
layer 314, size 790022495616
layer 316, size 803701939680
layer 318, size 811856854016
layer 320, size 826503058234
layer 322, size 834762319664
layer 324, size 849897363760
layer 326, size 858258488880
layer 328, size 873179794376
layer 330, size 880289495904
layer 332, size 894922399904
layer 334, size 902102007664
layer 336, size 916985267844
layer 338, size 923355136960
layer 340, size 938074365152
layer 342, size 944052068992
layer 344, size 958207635488
layer 346, size 962812489024
layer 348, size 977197453888
layer 350, size 982664382336
layer 352, size 998017872500
layer 354, size 1003163590656
layer 356, size 1018907123552
layer 358, size 1023938138496
layer 360, size 1038976188912
layer 362, size 1042219566976
layer 364, size 1057286904352
layer 366, size 1061082836736
layer 368, size 1076522548792
layer 370, size 1079282363776
layer 372, size 1094819416128
layer 374, size 1097356306176
layer 376, size 1112200488512
layer 378, size 1113301180992
layer 380, size 1129218555296
layer 382, size 1131981274112
layer 384, size 1148987757470
layer 386, size 1151047892176
layer 388, size 1168432563792
layer 390, size 1170047067280
layer 392, size 1185891180152
layer 394, size 1184984548384
layer 396, size 1201084196416
layer 398, size 1200823508560
layer 400, size 1216635049692
layer 402, size 1214391601728
layer 404, size 1229987583584
layer 406, size 1227021286400
layer 408, size 1241035234848
layer 410, size 1236143209536
layer 412, size 1251861059072
layer 414, size 1249010602112
layer 416, size 1265292673652
layer 418, size 1261022092736
layer 420, size 1277646476736
layer 422, size 1272602944256
layer 424, size 1286946091248
layer 426, size 1279254899776
layer 428, size 1294936857536
layer 430, size 1288626128640
layer 432, size 1303841595032
layer 434, size 1295411694976
layer 436, size 1311075636416
layer 438, size 1302247699200
layer 440, size 1316208035776
layer 442, size 1306007574592
layer 444, size 1323236154272
layer 446, size 1315886732160
layer 448, size 1333209090300
layer 450, size 1323891160640
layer 452, size 1341625235456
layer 454, size 1331056331520
layer 456, size 1345478459376
layer 458, size 1332070616064
layer 460, size 1348690864800
layer 462, size 1336725852800
layer 464, size 1351723271512
layer 466, size 1336805668480
layer 468, size 1352303811712
layer 470, size 1336600819840
layer 472, size 1349563313536
layer 474, size 1332769928256
layer 476, size 1350277995040
layer 478, size 1336541854336
layer 480, size 1353002537080
layer 482, size 1336677827520
layer 484, size 1353817378016
layer 486, size 1335976712960
layer 488, size 1349194590432
layer 490, size 1329317820096
layer 492, size 1346502490976
layer 494, size 1328641806336
layer 496, size 1343541576080
layer 498, size 1322892086912
layer 500, size 1339312482176
layer 502, size 1318202968576
layer 504, size 1331974523392
layer 506, size 1310986799616
layer 508, size 1331000320832
layer 510, size 1313076036480
layer 512, size 1330572770875
layer 514, size 1309446926560
layer 516, size 1327698041936
layer 518, size 1304335126640
layer 520, size 1317600417516
layer 522, size 1292741453952
layer 524, size 1310982378056
layer 526, size 1287496848560
layer 528, size 1301657062598
layer 530, size 1274950456000
layer 532, size 1290991616096
layer 534, size 1263381211040
layer 536, size 1276122669536
layer 538, size 1249698241376
layer 540, size 1269888768200
layer 542, size 1245837540480
layer 544, size 1261834658210
layer 546, size 1234513015680
layer 548, size 1251881152456
layer 550, size 1222143966400
layer 552, size 1234437195016
layer 554, size 1204998366656
layer 556, size 1224014843720
layer 558, size 1195815429120
layer 560, size 1209906224396
layer 562, size 1179333128096
layer 564, size 1196535708192
layer 566, size 1165283575040
layer 568, size 1179331246112
layer 570, size 1150935402240
layer 572, size 1173478767760
layer 574, size 1146366180960
layer 576, size 1162906544266
layer 578, size 1132465860480
layer 580, size 1150594272600
layer 582, size 1117054221920
layer 584, size 1129580278456
layer 586, size 1097564511680
layer 588, size 1117406876040
layer 590, size 1085286716800
layer 592, size 1098557726676
layer 594, size 1064467580800
layer 596, size 1081407841280
layer 598, size 1046226746240
layer 600, size 1059851114400
layer 602, size 1029003757600
layer 604, size 1051596281840
layer 606, size 1020561507680
layer 608, size 1035745354420
layer 610, size 1002164701440
layer 612, size 1019755279120
layer 614, size 983094679840
layer 616, size 995673030800
layer 618, size 962706815616
layer 620, size 983546987280
layer 622, size 949616152160
layer 624, size 963288361496
layer 626, size 928758995840
layer 628, size 947072558016
layer 630, size 911412844160
layer 632, size 926692551200
layer 634, size 896780649440
layer 636, size 920810277920
layer 638, size 888745777920
layer 640, size 903880891634
layer 642, size 869856265824
layer 644, size 887564287064
layer 646, size 849845258080
layer 648, size 862566473080
layer 650, size 829799536384
layer 652, size 850394871144
layer 654, size 814829942784
layer 656, size 827326432244
layer 658, size 792243297664
layer 660, size 809730335232
layer 662, size 773053869952
layer 664, size 787791583072
layer 666, size 758072419104
layer 668, size 780922837552
layer 670, size 747320109536
layer 672, size 760890110220
layer 674, size 726829372896
layer 676, size 743679564592
layer 678, size 706133168416
layer 680, size 719127196752
layer 682, size 688263156256
layer 684, size 708914959792
layer 686, size 674171834336
layer 688, size 686913731208
layer 690, size 654209901696
layer 692, size 672331236928
layer 694, size 637807986816
layer 696, size 653584595872
layer 698, size 626674144096
layer 700, size 649234602016
layer 702, size 616566542592
layer 704, size 629475433460
layer 706, size 597387032736
layer 708, size 613533366576
layer 710, size 577584178080
layer 712, size 590371516592
layer 714, size 561803808384
layer 716, size 581015505616
layer 718, size 547074459360
layer 720, size 558558627432
layer 722, size 527882712448
layer 724, size 544639053504
layer 726, size 511789299840
layer 728, size 526772183392
layer 730, size 502002105696
layer 732, size 522419737632
layer 734, size 490773500672
layer 736, size 502328057832
layer 738, size 472837706016
layer 740, size 487967642656
layer 742, size 454979464576
layer 744, size 467951285568
layer 746, size 443076387936
layer 748, size 461413921696
layer 750, size 430437047040
layer 752, size 441900351152
layer 754, size 415343475456
layer 756, size 431792489856
layer 758, size 402744742400
layer 760, size 417750626176
layer 762, size 396545140992
layer 764, size 415170234752
layer 766, size 385973952000
layer 768, size 396419185110
layer 770, size 370333454400
layer 772, size 383977293336
layer 774, size 354226549040
layer 776, size 366337190856
layer 778, size 344572517744
layer 780, size 360434994920
layer 782, size 331875303760
layer 784, size 341904433052
layer 786, size 318579526720
layer 788, size 333025379232
layer 790, size 307054762560
layer 792, size 320686149056
layer 794, size 302233001616
layer 796, size 318054558640
layer 798, size 291520809216
layer 800, size 300737425652
layer 802, size 278394221872
layer 804, size 290722430128
layer 806, size 265161856960
layer 808, size 276888793584
layer 810, size 259051303056
layer 812, size 273261906736
layer 814, size 248617789056
layer 816, size 258207117272
layer 818, size 239235988992
layer 820, size 252497883456
layer 822, size 230678587776
layer 824, size 243357793952
layer 826, size 228201232896
layer 828, size 241520715072
layer 830, size 218247469440
layer 832, size 226237497812
layer 834, size 207579286320
layer 836, size 218066682736
layer 838, size 196266365120
layer 840, size 206657490256
layer 842, size 191803721872
layer 844, size 203331673776
layer 846, size 181901301120
layer 848, size 190104553128
layer 850, size 174455733760
layer 852, size 185581964736
layer 854, size 167206475520
layer 856, size 178230459456
layer 858, size 165720446976
layer 860, size 176437544640
layer 862, size 156579346560
layer 864, size 163570350472
layer 866, size 148656928000
layer 868, size 157801513856
layer 870, size 140186202240
layer 872, size 149722810496
layer 874, size 138212180736
layer 876, size 147912582720
layer 878, size 130372045440
layer 880, size 137830106736
layer 882, size 125829075456
layer 884, size 135351105792
layer 886, size 120601004160
layer 888, size 130140125472
layer 890, size 120199322880
layer 892, size 128496251520
layer 894, size 111921089280
layer 896, size 117738879436
layer 898, size 105924148560
layer 900, size 113237258640
layer 902, size 98960797760
layer 904, size 106937402896
layer 906, size 97721894640
layer 908, size 105079251920
layer 910, size 90641566080
layer 912, size 96817581496
layer 914, size 87453751040
layer 916, size 95042943040
layer 918, size 83258373120
layer 920, size 91139028480
layer 922, size 83278141440
layer 924, size 89581627200
layer 926, size 76241742720
layer 928, size 81233913992
layer 930, size 72373002240
layer 932, size 78462776320
layer 934, size 67532674560
layer 936, size 74419765920
layer 938, size 67590222336
layer 940, size 73378743360
layer 942, size 62142537600
layer 944, size 67459556976
layer 946, size 60634080000
layer 948, size 66678134016
layer 950, size 57604609920
layer 952, size 63978289440
layer 954, size 57894819840
layer 956, size 62395681920
layer 958, size 51827043840
layer 960, size 55836447000
layer 962, size 49155452160
layer 964, size 53770698240
layer 966, size 45348652160
layer 968, size 50812678656
layer 970, size 45548097536
layer 972, size 49697909696
layer 974, size 40954665856
layer 976, size 45215162160
layer 978, size 40179534336
layer 980, size 44783922176
layer 982, size 37896799616
layer 984, size 42920327456
layer 986, size 38325387776
layer 988, size 41572425856
layer 990, size 33546839040
layer 992, size 36900717840
layer 994, size 32206970880
layer 996, size 35860630656
layer 998, size 29735888000
layer 1000, size 34177188896
layer 1002, size 30426369792
layer 1004, size 33461008256
layer 1006, size 26990346240
layer 1008, size 30455468192
layer 1010, size 26942240000
layer 1012, size 30345026816
layer 1014, size 25249086720
layer 1016, size 29055372736
layer 1018, size 25578558720
layer 1020, size 27706947840
layer 1022, size 21675413760
layer 1024, size 24263859695
layer 1026, size 20879617440
layer 1028, size 23504850960
layer 1030, size 19003886720
layer 1032, size 22341447576
layer 1034, size 19544602896
layer 1036, size 21601481720
layer 1038, size 16833891360
layer 1040, size 19506096486
layer 1042, size 17044631136
layer 1044, size 19515012192
layer 1046, size 15823991040
layer 1048, size 18684128996
layer 1050, size 16169593440
layer 1052, size 17624040720
layer 1054, size 13300853280
layer 1056, size 15389685486
layer 1058, size 13151960640
layer 1060, size 15110500080
layer 1062, size 11992780800
layer 1064, size 14544547836
layer 1066, size 12611158560
layer 1068, size 14005134000
layer 1070, size 10654026240
layer 1072, size 12703302716
layer 1074, size 11038890720
layer 1076, size 12738828960
layer 1078, size 10112662560
layer 1080, size 12152317320
layer 1082, size 10298951520
layer 1084, size 11181456000
layer 1086, size 8102334240
layer 1088, size 9649098270
layer 1090, size 8105546400
layer 1092, size 9451654800
layer 1094, size 7264624640
layer 1096, size 9089776140
layer 1098, size 7705160736
layer 1100, size 8604443120
layer 1102, size 6266282880
layer 1104, size 7788612276
layer 1106, size 6685005600
layer 1108, size 7860355776
layer 1110, size 6046360320
layer 1112, size 7513496120
layer 1114, size 6235188960
layer 1116, size 6802498560
layer 1118, size 4725520800
layer 1120, size 5920214316
layer 1122, size 4957158336
layer 1124, size 5895467136
layer 1126, size 4453431840
layer 1128, size 5764031832
layer 1130, size 4829167200
layer 1132, size 5388926400
layer 1134, size 3829906080
layer 1136, size 4927854776
layer 1138, size 4194315840
layer 1140, size 4948188960
layer 1142, size 3704981280
layer 1144, size 4690754640
layer 1146, size 3776572800
layer 1148, size 4095611520
layer 1150, size 2692609920
layer 1152, size 3538941006
layer 1154, size 2901568800
layer 1156, size 3517784400
layer 1158, size 2549106560
layer 1160, size 3442088780
layer 1162, size 2800397600
layer 1164, size 3143540400
layer 1166, size 2114203520
layer 1168, size 2898584676
layer 1170, size 2435232800
layer 1172, size 2927724800
layer 1174, size 2109627520
layer 1176, size 2788345560
layer 1178, size 2186344160
layer 1180, size 2377826880
layer 1182, size 1491570080
layer 1184, size 2110345796
layer 1186, size 1729911040
layer 1188, size 2130471200
layer 1190, size 1522160640
layer 1192, size 2123143880
layer 1194, size 1699457760
layer 1196, size 1896614720
layer 1198, size 1243642400
layer 1200, size 1775459400
layer 1202, size 1469948480
layer 1204, size 1767365600
layer 1206, size 1226345120
layer 1208, size 1658948720
layer 1210, size 1246044800
layer 1212, size 1346945600
layer 1214, size 778377600
layer 1216, size 1198983020
layer 1218, size 959300160
layer 1220, size 1210431040
layer 1222, size 819538720
layer 1224, size 1211832440
layer 1226, size 935174240
layer 1228, size 1048727680
layer 1230, size 643362720
layer 1232, size 1008829640
layer 1234, size 824183360
layer 1236, size 1005644640
layer 1238, size 668988320
layer 1240, size 953192240
layer 1242, size 693813120
layer 1244, size 749228480
layer 1246, size 415775360
layer 1248, size 704175576
layer 1250, size 564907200
layer 1252, size 716899040
layer 1254, size 482562080
layer 1256, size 728830960
layer 1258, size 550309760
layer 1260, size 610850240
layer 1262, size 364524160
layer 1264, size 597911600
layer 1266, size 476636160
layer 1268, size 580099520
layer 1270, size 364524160
layer 1272, size 537336800
layer 1274, size 367727360
layer 1276, size 394954560
layer 1278, size 192192000
layer 1280, size 380350646
layer 1282, size 296552256
layer 1284, size 386642256
layer 1286, size 242962720
layer 1288, size 397112716
layer 1290, size 286414128
layer 1292, size 318766448
layer 1294, size 176384208
layer 1296, size 329565236
layer 1298, size 258145888
layer 1300, size 316604288
layer 1302, size 190798608
layer 1304, size 298145848
layer 1306, size 196804608
layer 1308, size 210738528
layer 1310, size 100580480
layer 1312, size 220599236
layer 1314, size 172492320
layer 1316, size 223871648
layer 1318, size 140700560
layer 1320, size 231279048
layer 1322, size 162017856
layer 1324, size 178226048
layer 1326, size 94174080
layer 1328, size 187235048
layer 1330, size 141261120
layer 1332, size 172780608
layer 1334, size 94814720
layer 1336, size 157805648
layer 1338, size 95135040
layer 1340, size 101060960
layer 1342, size 38438400
layer 1344, size 113877556
layer 1346, size 86188960
layer 1348, size 114468640
layer 1350, size 66569360
layer 1352, size 120722888
layer 1354, size 80070848
layer 1356, size 87950720
layer 1358, size 43563520
layer 1360, size 101263448
layer 1362, size 74625408
layer 1364, size 90929696
layer 1366, size 48688640
layer 1368, size 85115888
layer 1370, size 49649600
layer 1372, size 52692640
layer 1374, size 21141120
layer 1376, size 65719368
layer 1378, size 49832640
layer 1380, size 65208000
layer 1382, size 37797760
layer 1384, size 67818608
layer 1386, size 43243200
layer 1388, size 46926880
layer 1390, size 21141120
layer 1392, size 54845648
layer 1394, size 38118080
layer 1396, size 46286240
layer 1398, size 21141120
layer 1400, size 41801760
layer 1402, size 21141120
layer 1404, size 22102080
layer 1406, size 5765760
layer 1408, size 32579196
layer 1410, size 23668320
layer 1412, size 31399680
layer 1414, size 16867760
layer 1416, size 33834840
layer 1418, size 20250048
layer 1420, size 21956480
layer 1422, size 9609600
layer 1424, size 29005288
layer 1426, size 19568640
layer 1428, size 23526048
layer 1430, size 10832640
layer 1432, size 21890960
layer 1434, size 10920000
layer 1436, size 11487840
layer 1438, size 3669120
layer 1440, size 18536648
layer 1442, size 13465088
layer 1444, size 17527328
layer 1446, size 9085440
layer 1448, size 18143216
layer 1450, size 10221120
layer 1452, size 10876320
layer 1454, size 3843840
layer 1456, size 14913808
layer 1458, size 9172800
layer 1460, size 10876320
layer 1462, size 3843840
layer 1464, size 9828000
layer 1466, size 3843840
layer 1468, size 3931200
layer 1470, size 524160
layer 1472, size 8938488
layer 1474, size 6152640
layer 1476, size 7987200
layer 1478, size 3960320
layer 1480, size 8707920
layer 1482, size 4630080
layer 1484, size 4964960
layer 1486, size 1921920
layer 1488, size 7729488
layer 1490, size 4630080
layer 1492, size 5460000
layer 1494, size 2096640
layer 1496, size 5052320
layer 1498, size 2096640
layer 1500, size 2184000
layer 1502, size 524160
layer 1504, size 5006768
layer 1506, size 3407040
layer 1508, size 4324320
layer 1510, size 1921920
layer 1512, size 4411680
layer 1514, size 2096640
layer 1516, size 2184000
layer 1518, size 524160
layer 1520, size 3741920
layer 1522, size 1921920
layer 1524, size 2184000
layer 1526, size 524160
layer 1528, size 2009280
layer 1530, size 524160
layer 1532, size 524160
layer 1534, size 0
layer 1536, size 2322450
layer 1538, size 1485120
layer 1540, size 1878240
layer 1542, size 837200
layer 1544, size 2032940
layer 1546, size 946400
layer 1548, size 1001000
layer 1550, size 320320
layer 1552, size 1880060
layer 1554, size 960960
layer 1556, size 1110200
layer 1558, size 334880
layer 1560, size 1022840
layer 1562, size 334880
layer 1564, size 342160
layer 1566, size 43680
layer 1568, size 1280188
layer 1570, size 786240
layer 1572, size 950040
layer 1574, size 334880
layer 1576, size 957320
layer 1578, size 349440
layer 1580, size 356720
layer 1582, size 43680
layer 1584, size 848120
layer 1586, size 334880
layer 1588, size 356720
layer 1590, size 43680
layer 1592, size 342160
layer 1594, size 43680
layer 1596, size 43680
layer 1598, size 0
layer 1600, size 570908
layer 1602, size 331968
layer 1604, size 408408
layer 1606, size 160160
layer 1608, size 430248
layer 1610, size 174720
layer 1612, size 182000
layer 1614, size 43680
layer 1616, size 415688
layer 1618, size 174720
layer 1620, size 196560
layer 1622, size 43680
layer 1624, size 182000
layer 1626, size 43680
layer 1628, size 43680
layer 1630, size 0
layer 1632, size 306488
layer 1634, size 160160
layer 1636, size 182000
layer 1638, size 43680
layer 1640, size 182000
layer 1642, size 43680
layer 1644, size 43680
layer 1646, size 0
layer 1648, size 167440
layer 1650, size 43680
layer 1652, size 43680
layer 1654, size 0
layer 1656, size 43680
layer 1658, size 0
layer 1660, size 0
layer 1662, size 0
layer 1664, size 130508
layer 1666, size 67200
layer 1668, size 79800
layer 1670, size 25760
layer 1672, size 81480
layer 1674, size 26880
layer 1676, size 27440
layer 1678, size 3360
layer 1680, size 81480
layer 1682, size 26880
layer 1684, size 28560
layer 1686, size 3360
layer 1688, size 27440
layer 1690, size 3360
layer 1692, size 3360
layer 1694, size 0
layer 1696, size 66920
layer 1698, size 26880
layer 1700, size 28560
layer 1702, size 3360
layer 1704, size 28560
layer 1706, size 3360
layer 1708, size 3360
layer 1710, size 0
layer 1712, size 27440
layer 1714, size 3360
layer 1716, size 3360
layer 1718, size 0
layer 1720, size 3360
layer 1722, size 0
layer 1724, size 0
layer 1726, size 0
layer 1728, size 27608
layer 1730, size 12320
layer 1732, size 14000
layer 1734, size 3360
layer 1736, size 14000
layer 1738, size 3360
layer 1740, size 3360
layer 1742, size 0
layer 1744, size 14000
layer 1746, size 3360
layer 1748, size 3360
layer 1750, size 0
layer 1752, size 3360
layer 1754, size 0
layer 1756, size 0
layer 1758, size 0
layer 1760, size 12880
layer 1762, size 3360
layer 1764, size 3360
layer 1766, size 0
layer 1768, size 3360
layer 1770, size 0
layer 1772, size 0
layer 1774, size 0
layer 1776, size 3360
layer 1778, size 0
layer 1780, size 0
layer 1782, size 0
layer 1784, size 0
layer 1786, size 0
layer 1788, size 0
layer 1790, size 0
layer 1792, size 5300
layer 1794, size 1920
layer 1796, size 2040
layer 1798, size 240
layer 1800, size 2040
layer 1802, size 240
layer 1804, size 240
layer 1806, size 0
layer 1808, size 2040
layer 1810, size 240
layer 1812, size 240
layer 1814, size 0
layer 1816, size 240
layer 1818, size 0
layer 1820, size 0
layer 1822, size 0
layer 1824, size 2040
layer 1826, size 240
layer 1828, size 240
layer 1830, size 0
layer 1832, size 240
layer 1834, size 0
layer 1836, size 0
layer 1838, size 0
layer 1840, size 240
layer 1842, size 0
layer 1844, size 0
layer 1846, size 0
layer 1848, size 0
layer 1850, size 0
layer 1852, size 0
layer 1854, size 0
layer 1856, size 920
layer 1858, size 240
layer 1860, size 240
layer 1862, size 0
layer 1864, size 240
layer 1866, size 0
layer 1868, size 0
layer 1870, size 0
layer 1872, size 240
layer 1874, size 0
layer 1876, size 0
layer 1878, size 0
layer 1880, size 0
layer 1882, size 0
layer 1884, size 0
layer 1886, size 0
layer 1888, size 240
layer 1890, size 0
layer 1892, size 0
layer 1894, size 0
layer 1896, size 0
layer 1898, size 0
layer 1900, size 0
layer 1902, size 0
layer 1904, size 0
layer 1906, size 0
layer 1908, size 0
layer 1910, size 0
layer 1912, size 0
layer 1914, size 0
layer 1916, size 0
layer 1918, size 0
layer 1920, size 136
layer 1922, size 16
layer 1924, size 16
layer 1926, size 0
layer 1928, size 16
layer 1930, size 0
layer 1932, size 0
layer 1934, size 0
layer 1936, size 16
layer 1938, size 0
layer 1940, size 0
layer 1942, size 0
layer 1944, size 0
layer 1946, size 0
layer 1948, size 0
layer 1950, size 0
layer 1952, size 16
layer 1954, size 0
layer 1956, size 0
layer 1958, size 0
layer 1960, size 0
layer 1962, size 0
layer 1964, size 0
layer 1966, size 0
layer 1968, size 0
layer 1970, size 0
layer 1972, size 0
layer 1974, size 0
layer 1976, size 0
layer 1978, size 0
layer 1980, size 0
layer 1982, size 0
layer 1984, size 16
layer 1986, size 0
layer 1988, size 0
layer 1990, size 0
layer 1992, size 0
layer 1994, size 0
layer 1996, size 0
layer 1998, size 0
layer 2000, size 0
layer 2002, size 0
layer 2004, size 0
layer 2006, size 0
layer 2008, size 0
layer 2010, size 0
layer 2012, size 0
layer 2014, size 0
layer 2016, size 0
layer 2018, size 0
layer 2020, size 0
layer 2022, size 0
layer 2024, size 0
layer 2026, size 0
layer 2028, size 0
layer 2030, size 0
layer 2032, size 0
layer 2034, size 0
layer 2036, size 0
layer 2038, size 0
layer 2040, size 0
layer 2042, size 0
layer 2044, size 0
layer 2046, size 0
layer 2048, size 1
\end{verbatim}
\normalsize
$(2048 = 16 \cdot 128)$, больше сумм у нас не бывает;\\
Всего позиций $8^{16} = 281474976710656 \approx 2.81 \cdot 10^{14}$;\\
Максимальный размер слоя $1353817378016 \approx 1.35 \cdot 10^{12}$;\\
Eсли хранить по биту на позицию, получается 170гб на самый большой слой;\\
Предлагается идти по слоям, начиная с больших сумм, одновременно храня в памяти (потому что это, насколько я понимаю, несравнимо быстрее, чем класть кусочками на диски и читать оттуда прямо во время вычисления, потому что внутри слоя довольно рандомный доступ нужен, а не просто всё прочитать и обработать; короче, диски для этой цели не подходят) три последовательных слоя (текущий, с суммой на два меньше, и с суммой на четыре меньше), это 508гб оперативной памяти;\\
Хорошо подходит любой предлагаемый вычислительный узел (кроме $D$, где вообще нет GPU), как раз у всех хотя бы 768гб;\\
\textbf{Но непонятно, можно ли взять память одного узла вот так, на большую часть, не беря кучу ядер CPU, которые в этом узле есть.} Пока кажется, что CPU нужно не так много, но может получиться такая глупая ситуация, что нельзя взять оперативку, не взяв ещё к ней кучу ядро-часов.\\
Итак, предлагается хранить по три слоя одновременно, это удачно влезает в память одного вычислительного узла кластера. Такой и рассчёт потому дальше, что раз так, то дело внутри одного узла.\\\\
Для пост-проверки и возможной пост-обработки предлагается не выкидывать резльутаты вычисления, а сохранять слои, но уже на диски, конечно. Это в данном случае $\approx 2.81 \cdot 10^{14} / 8$ байт, то есть 36тб. Это такой объём, который достаточен для удобной работы с результатами, например, тестирование. То есть это хранение, по сути, в несжатом виде.\\
Если столько запросить не получится, нужно будет либо уже в этой задаче пытаться сжимать, либо, что более вероятно, тестировать ответ лишь промежуточно, что программа умеет сводить задачу из суммы хотя бы такой-то в сумму хотя бы такую-то, что всё ещё выигрывает, \textit{как утверждает согласно базе прошлой итерации, которая типа уже была проверена}, и каждый раз, проверив, выкидывать всё прошлое. Таким образом, в конце будет только ответ, уже без возможности проверить. Но это, конечно, только в (согласованном с дефолтным раскладом) случае, что 256 набрать можно. Если нельзя, то (это слишком оптимистично, потому что тогда всё слишком просто), конечно, их надо будет не только протестировать, а и сжать уже нормально, много потестировать, сделать приложение, и на этом считать всю глобальную задачу успешно выполненной.\\
Кстати, понятно, что если пойти по этому скользкому пути, где нужно выборочно убеждаться в очередном кусочке базы, надеясь на уже выборочно проверенные, уже удалённые, то в случае успеха не будет никаких доказательств, будет лишь факт перед нами, что да, если теперь ещё раз повторить это вычисление, но уже не выкидывая информацию, то мы получим доказательство.\\
\clearpage


\section{Классы эквивалентности}
Введём следующее отношение эквивалентности на позициях: каждой позиции будем сопостовлять неупорядоченный набор встречающихся плиток, две позиции эквивалентны iff наборы сопали;\\
Это отношение, что называется, finer, чем разбиение на слои;\\
Рассмотрим граф $G_0$ на этих классах, проведём ребро из класса в другой, если первый нужен и должен быть посчитан ранее, чем второй (если считать, что они считаются сразу полностью), потому что \textit{хотя бы одна позиция во втором может быть получена из хотя бы одной позиции в первом};\\
Рассмотрим граф $G_1 \supseteq G_0$ (строгое ли включение? рассчёт, что не слишком): из неупорядоченного набора плиток $a$ есть ребро в неупорядоченный набор $b$ iff \textit{можно в $a$ так послепливать некоторые непересекающиеся пары плиток, а потом добавить либо двойку, либо четвёрку, чтобы получился $b$};\\
В общем:
\begin{itemize}
  \item Классов эквивалентности 245157;
  \item Максимальный размер класса эквивалетности $81729648000 \approx 8.17 \cdot 10^{10}$, то есть 11гб;
  \item Рёбер в $G_1$ 325956;
  \item Максимальная входящая степень вершины в $G_1$ равна 1024 (аномально, в среднем, вот, 1.3);
\end{itemize}
Итак, внутри одного узла 4 x V100, у каждой 32гб, по ним надо будет распихивать как-то и перегонять части слоёв; предположительно, по классам эквивалентности, а в тех предположительно редких случаях, когда так не будет нормально получаться, придётся и эти классы как-то разбивать или сжимать, это \textbf{пока не проанализировано}.\\
P.S. Если пользоваться типом $C$, там есть попарный NVLink, для постоянного перекидывания классов и кросс-индексации между GPU это, вполне возможно, будет полезно. \textit{Но я никогда не работал с NVLink, не знаю, насколько это удобно и что позволяет сделать.}
\clearpage


\section{Вопрос индексации}
Есть несколько типов множеств, по которым пока возникала задача индексации, с разными идеями по решениям.\\
\begin{itemize}
  \item Глобальная индексация среди всех позиций (с тайлами не больше рассматриваемого): Тривиально, это как перевод в восьмиричную систему счисления. Ну не мгновенно, несколько десятков или сотен тактов на это нужно, конечно, но это относительно того, что ниже, лёгкая штука, и не требует никаких доступов в далёкие части памяти. Конечно, была успешно реализована не раз, так работает.\\
  \item Индексация внутри слоя: Здесь предлагается посчитать вспомогательное ДП (динамическое программирование):\\ $cnt\_positions[sum][cnt\_left\_tiles]$ для суммы $sum$ и количества $cnt\_left\_tiles$ плиток оно говорит, сколько есть способов выбрать столько плиток с такой суммой (конечно, с верхним ограничением 128 на плитки); это ДП легко предподсчитать. Этот метод индексации всё ещё быстро работает, это маленькая вычислительная нагрузка в процессе индексации, но размер массива не совсем маленький, скажем, $2049 \cdot 17$ интов, то есть 140кб, его надо либо пытаться впихнуть в кеш каждого стримингого мультипроцессора (аналог L2-кеша), но когда я это пытался сделать вручную, стало работать даже немного хуже, чем когда кеширование было автоматическим, а массив просто лежал в глобальной памяти, либо доставлять как-то каждому из (желательно, десятков тысяч) запускаемых одновременно потоков, а это уже гигабайты памяти. Эта индексация была реализована и успешно ускорила 3x4 в девять раз тогда.\\
  \item Индексация внутри класса эквивалентности: Ох, видимо, это тоже придётся делать. Пока есть такой примерный план, \textit{это не было реализовано}: раз я знаю класс, в котором я собираюсь индексироваться, там столько-то двоек, столько-то четвёрок и тд, предлагается предподсчитать следующий девятимерный массив: по оставшейся сумме, оставшемуся количеству двоек, четвёрок, .., пустых клеток мы должны знать сразу, сколько бывает таких наборов из плиток. Какой у этого размер? Ну интов где-то $2049x$ максимальное произведение восьми чисел, в сумме дающих 24, а это $3^8$, так что \textit{54 мегабайта}, что уже ни в какой кеш не влезает, будет лежать себе в глобальной памяти, будучи нужным всем и всегда.... Так что тут я опасаюсь за производительность, а пока не было задачи, где эту скорость посмотреть. \textbf{Это может занимать в несколько раз больше времени, чем ожидалось, что может критично повлиять на производительность, у меня про это на данный момент нет данных.}\\
  \item Индексация внутри сжатого чего угодно, даже с помощью только симметрий: Никак. Ну, то есть, не вижу практичного способа это применять во время вычислений, но вот для пост-сжатия вижу примерно так: из интересного нам множества сэмплим каждую, например, тысячную позицию (рандом), насколько уж хватит памяти, потом для всех их считаем номер в нашем множестве, теперь чтобы сделать индексацию, нужно сначала сделать бинпоиск, а затем в оставшемся промежутке (в примере размера порядка 1000, но всяко лучше, чем десятки миллиардов) пытаться отсчитать просто за линию нужную позицию, что возможно, если наше описание множества позволяет хотя бы быстро брать следующую удовлетворяющую (что вроде правда для сжатий симметриями, но не похоже на правду для сжатия игнорированием тех глупых позиций).\\
  \item Индексация внутри сложноустроенного множества, для которого даже принадлежность сложно проверить, не говоря уже о задаче найти следующий элемент: Ну, надеюсь, обойдётся без этого, но всё же, если придётся, то даже в этом случае можно что-то сделать: надо все эти позиции вложить в какое-то легкоиндексируемое множество как можно меньшего размера, например, слой, а там разбить его на миллиард кусочков (на самом деле, на сколько хватит памяти, опять же), а внутри кусочка мы знаем, за какой отрезок позиций он отвечает в порядке индексации, там надо просто перебрать уже \textit{все позиции в этом блоке}, но это адекватный размер, если объемлющее множество адекватного размера, а слой вроде подходит. Кстати, если объемлющее множество не позволяет индексировать, но позволяет брать следующий, то можно разбить на блоки приближённо с помощью рандомизации, как и выше. Для сложного множества типа глупых позиций, где проверка принадлежности может занимать \textit{десятки микросекунд}, нам может потребоваться на индексацию ждать \textit{доли секунды}, так что это разве что на стороне клиента для разового запуска практично, но вот даже пройтись с такими временами по разумной доли всех позиций ещё на кластере не представляется возможным, так что это пока остаётся не особо практическим замечанием.\\
\end{itemize}



\end{document}